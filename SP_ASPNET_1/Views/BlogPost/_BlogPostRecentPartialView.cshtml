@using SP_ASPNET_1.BusinessLogic
@model SP_ASPNET_1.ViewModels.BlogSinglePostViewModel

<div class="Posts__Recent">
    <h1 class="Posts__Recent-title">recent post</h1>
    @if (Model != null)
    {
        <img src="@Html.AttributeEncode(Constants.POST_IMAGE_PREFIX + Model.BlogPost.ImageUrl)" alt="post image preview" class="Post__Image">
        <div class="Post-Preview__Content">
            <h2>@Model.BlogPost.Title</h2>
            <p>By @Model.Author on @Model.BlogPost.DateTime.ToString(Constants.DISPLAY_DATETIME_FORMAT)</p>
            <br>
            @if (Model.BlogPost.Content.Length > 50)
            {
                <p>@Model.BlogPost.Content.Substring(0, 50)...</p>
            }
            else
            {
                <p>@Model.BlogPost.Content</p>
            }
            <button onClick="location.href='@Url.Action("SinglePost", new { id = Model.BlogPost.BlogPostID})'" class="c-btn c-btn--dark">read more</button>
            <button onClick="Like(@Model.BlogPost.BlogPostID)" class="c-btn">Like</button>
            <br>
            <span class="likes" postID="@Model.BlogPost.BlogPostID">Likes : @Model.BlogPost.Likes</span>
        </div>
    }
    else
    {
        <h2>There is no recent post :-(</h2>
    }
</div>